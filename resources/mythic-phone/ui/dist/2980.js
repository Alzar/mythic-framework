"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[2980],{92980:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(89526),c=n(92070),a=n(72215),o=n(91153),i=n(77548),l=n(81939),u=n(16025),s=n(99494),m=n(94882),p=n(2029),f=n(34411),d=n(71529),h=n(57170),g=n(59324),b=n.n(g),y=n(21447),v=n(87961),A=n(20785);function w(e,t,n,r,c,a,o){try{var i=e[a](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,c)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function o(e){w(a,r,c,o,i,"next",e)}function i(e){w(a,r,c,o,i,"throw",e)}o(void 0)}))}}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=(0,d.Z)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main},emptyLogo:{width:"100%",fontSize:170,textAlign:"center",marginTop:"25%",color:"#30518c29"},emptyMsg:{color:e.palette.text.alt,width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold"},listItem:{background:e.palette.secondary.dark,borderRadius:5,boxShadow:"0px 0px 12px -2px rgba(0,0,0,0.3)",marginBottom:"5%"},successText:{color:e.palette.success.main},errorText:{color:e.palette.error.light},editField:{marginBottom:20,width:"100%"}}}));const T=(0,c.$j)()((function(e){var t,n=j(),d=(0,v.VY)(),g=(0,c.v9)((function(e){return e.data.data.bankAccounts})),w=null==g?void 0:g.accounts,x=null==g?void 0:g.pendingBills,O=w&&w.filter((function(e){return"personal"==e.Type}))[0],T=P((0,r.useState)(!1),2),D=T[0],N=T[1],S=P((0,r.useState)({bill:0,withAccount:O.Account}),2),Z=S[0],I=S[1],L=function(){var t=E(regeneratorRuntime.mark((function t(n){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setLoading("Accepting Bill"),!((r=w&&w.filter((function(e){return e.Account==Z.withAccount}))[0])&&r.Balance>=(null==Z?void 0:Z.billData.Amount))){t.next=22;break}return t.prev=4,t.next=7,y.Z.send("Banking:AcceptBill",{bill:Z.billId,account:Z.withAccount});case 7:return t.next=9,t.sent.json();case 9:c=t.sent,d(c?"Bill Has Been Paid":"Error Paying Bill"),setTimeout((function(){return e.refreshAccounts()}),750),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),d("Error Paying Bill"),e.setLoading(!1);case 18:N(!1),I({bill:0,withAccount:O.Account}),t.next=24;break;case 22:d("Insufficient Funds to Pay Bill"),e.setLoading(!1);case 24:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=E(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading("Dismissing Bill"),t.prev=1,t.next=4,y.Z.send("Banking:DismissBill",{bill:n.Id});case 4:return t.next=6,t.sent.json();case 6:t.sent?(d("Bill Has Been Dismissed"),setTimeout((function(){e.refreshAccounts()}),750)):(d("Error Dismissing Bill"),e.setLoading(!1)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),d("Error Dismissing Bill"),e.setLoading(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return x.length>0?r.createElement("div",{className:n.wrapper},r.createElement("div",null,r.createElement(a.Z,null,x.sort((function(e,t){return t.Timestamp-e.Timestamp})).map((function(e){return r.createElement(o.ZP,{key:e.Id,className:n.listItem},r.createElement(i.Z,{primary:r.createElement("span",null,r.createElement("span",{className:n.successText},"$",e.Amount)," - ",e.Name),secondary:r.createElement("span",null,e.Account&&r.createElement("span",null,"Account Number: ",e.Account,".",r.createElement("br",null)),"Received ",r.createElement(b(),{unix:!0,date:e.Timestamp,fromNow:!0}),".",r.createElement("br",null),r.createElement("br",null),e.Description),secondaryTypographyProps:{maxWidth:"85%"}}),r.createElement(l.Z,null,r.createElement(u.Z,{className:n.errorText,onClick:function(){return C(e)}},r.createElement(h.G,{icon:["fas","xmark"]})),r.createElement(u.Z,{className:n.successText,onClick:function(){return function(e){I({billData:e,billId:e.Id,withAccount:O.Account}),N(!0)}(e)}},r.createElement(h.G,{icon:["fas","check"]}))))})))),r.createElement(A.u_,{form:!0,open:D,title:"Accept Bill of $".concat(null===(t=Z.billData)||void 0===t?void 0:t.Amount),submitLang:"Accept Bill",onAccept:L,onClose:function(){return N(!1)}},r.createElement(s.Z,{className:n.editField},r.createElement(m.Z,{id:"withAccount",name:"withAccount",value:Z.withAccount,onChange:function(e){I(k(k({},Z),{},B({},e.target.name,e.target.value)))}},w.map((function(e){var t;return r.createElement(p.Z,{key:e.Account,value:e.Account,disabled:!(null!==(t=e.Permissions)&&void 0!==t&&t.WITHDRAW)},"".concat(function(e){switch(e.Type){case"personal":return"Personal Account";case"personal_savings":return"Personal Savings Account";default:return e.Name}}(e)," - ").concat(e.Account))}))),r.createElement(f.Z,null,"Select the account that you wish to pay with.")))):r.createElement("div",{className:n.wrapper},r.createElement("div",{className:n.emptyLogo},r.createElement(h.G,{icon:["fas","tree-palm"]})),r.createElement("div",{className:n.emptyMsg},"No Pending Bills"))}))}}]);