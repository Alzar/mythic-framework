"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[2613,9223],{9223:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r(89526),a=r(91153),i=r(77548),o=r(81939),u=r(16025),c=r(71529),l=r(57170),s=r(20785),p=r(21447),f=r(87961);function d(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=(0,c.Z)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main}}}));const g=function(e){var t=e.property,r=e.data,c=e.canRevoke,y=e.onRefresh,g=e.onUpdate,v=(b(),(0,f.VY)()),h=m((0,n.useState)(!1),2),k=h[0],w=h[1],O=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.Z.send("Home:RevokeDigiKey",{id:t.id,target:r.Char});case 3:return e.next=5,e.sent.json();case 5:if((a=e.sent).error){e.next=12;break}v("DigiKey Has Been Revoked"),w(!1),y(),e.next=29;break;case 12:e.t0=a.code,e.next=1===e.t0?15:2===e.t0?17:3===e.t0?19:4===e.t0?21:5===e.t0?23:6===e.t0?25:7===e.t0?27:29;break;case 15:return v("Error Occured"),e.abrupt("break",29);case 17:return v("Invalid Property"),e.abrupt("break",29);case 19:return v("Not Allowed"),e.abrupt("break",29);case 21:return v("Invalid Target Player"),e.abrupt("break",29);case 23:return v("Invalid Target Character"),e.abrupt("break",29);case 25:return v("Person Doesn't Have A DigiKey For Property"),e.abrupt("break",29);case 27:return v("Error Occured Revoking DigiKey"),e.abrupt("break",29);case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),console.log(e.t1);case 34:case"end":return e.stop()}}),e,null,[[0,31]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){d(i,n,a,o,u,"next",e)}function u(e){d(i,n,a,o,u,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement(a.ZP,{divider:!0},n.createElement(i.Z,{primary:"".concat(r.First," ").concat(r.Last),secondary:r.Owner?"Owner":"Key Holder"}),c&&n.createElement(o.Z,null,n.createElement(u.Z,{onClick:g},n.createElement(l.G,{icon:["fas","pen-to-square"]})),n.createElement(u.Z,{onClick:function(){return w(!0)}},n.createElement(l.G,{icon:["fas","trash"]})))),c&&n.createElement(s.I4,{title:"Revoke DigiKey?",open:k,confirm:"Yes",decline:"No",onConfirm:O,onDecline:function(){return w(!1)}},n.createElement("p",null,"Removing the DigiKey will revoke access to this property and shared assets for this person. Are you sure?")))}},32613:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(89526),a=(r(92070),r(72215)),i=r(65096),o=r(23646),u=r(99494),c=r(40438),l=r(94882),s=r(14795),p=r(2029),f=r(13552),d=r(77548),m=r(34411),y=r(71529),b=r(57170),g=r(30909),v=r(20785),h=r(9223),k=r(87961),w=r(21447);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=(0,y.Z)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,overflow:"hidden"},header:{background:"#30518c",fontSize:20,padding:15,lineHeight:"50px",height:78},headerAction:{},emptyMsg:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"},fab:{backgroundColor:"#30518c",position:"absolute",bottom:"20%",right:"10%"},list:{height:"100%",overflowX:"hidden",overflowY:"auto"},editorField:{marginBottom:15}}})),Z=[{value:"upgrade",name:"Manage Upgrades"},{value:"furniture",name:"Manage Furniture"}];const A=function(e){var t=e.property,r=e.onRefresh,y=e.myKey,O=x(),S=(0,k.VY)(),A=D((0,n.useState)(!1),2),C=A[0],I=A[1],K=D((0,n.useState)(!1),2),R=K[0],N=K[1],F=D((0,n.useState)(Object()),2),U=F[0],H=F[1],T=D((0,n.useState)({}),2),M=T[0],W=T[1],B=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),I(!0),e.prev=2,e.next=5,w.Z.send("Home:CreateDigiKey",{updating:null==M?void 0:M.updating,id:t.id,target:+(null==M?void 0:M.target),permissions:U});case 5:return e.next=7,e.sent.json();case 7:if((a=e.sent).error){e.next=14;break}S(null!=M&&M.updating?"DigiKey Has Been Updated":"New DigiKey Has Been Issued"),N(!1),r(),e.next=31;break;case 14:e.t0=a.code,e.next=1===e.t0?17:2===e.t0?19:3===e.t0?21:4===e.t0?23:5===e.t0?25:6===e.t0?27:7===e.t0?29:31;break;case 17:return S("Error Occured"),e.abrupt("break",31);case 19:return S("Invalid Property"),e.abrupt("break",31);case 21:return S("Not Allowed"),e.abrupt("break",31);case 23:return S("Invalid Target Player"),e.abrupt("break",31);case 25:return S("Invalid Target Character"),e.abrupt("break",31);case 27:return S("Person Already Has DigiKey For Property"),e.abrupt("break",31);case 29:return S("Error Occured Issuing DigiKey"),e.abrupt("break",31);case 31:e.next=37;break;case 33:e.prev=33,e.t1=e.catch(2),console.log(e.t1),S("Unable to Create DigiKey");case 37:I(!1);case 38:case"end":return e.stop()}}),e,null,[[2,33]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){P(i,n,a,o,u,"next",e)}function u(e){P(i,n,a,o,u,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return n.createElement("div",{className:O.wrapper},n.createElement(a.Z,{className:O.list},Object.keys(t.keys).sort((function(e,r){return t.keys[r].Owner-t.keys[e].Owner})).map((function(e){var a=t.keys[e];return n.createElement(h.default,{key:e,property:t,data:a,canRevoke:y.Owner&&!a.Owner,onRefresh:r,onUpdate:function(){return function(e){var t;H(null!==(t=e.Permissions)&&void 0!==t?t:Object()),W({updating:!0,target:e.SID}),N(!0)}(a)}})}))),y.Owner&&n.createElement(n.Fragment,null,n.createElement(i.Z,{className:O.fab,onClick:function(){W({}),N(!0)}},n.createElement(b.G,{icon:["fas","plus"]})),n.createElement(v.u_,{form:!0,formStyle:{position:"relative"},disabled:C,open:R,title:null!=M&&M.updating?"Update DigiKey":"Create New DigiKey",onAccept:B,onClose:function(){return N(!1)},submitLang:null!=M&&M.updating?"Update":"Create"},n.createElement(n.Fragment,null,C&&n.createElement(v.aN,{static:!0,text:null!=M&&M.updating?"Updating DigiKey":"Creating DigiKey"}),n.createElement(g.Z,{fullWidth:!0,required:!0,label:"Target State ID",name:"target",type:"tel",isNumericString:!0,customInput:o.Z,disabled:C||(null==M?void 0:M.updating),className:O.editorField,value:M.target,onChange:function(e){W(E(E({},M),{},j({},e.target.name,e.target.value)))}}),n.createElement(u.Z,{fullWidth:!0,className:O.editorField},n.createElement(c.Z,{id:"permissions"},"Permissions"),n.createElement(l.Z,{id:"permissions",name:"permissions",disabled:C,value:Object.keys(U),labelId:"permissions",multiple:!0,fullWidth:!0,input:n.createElement(s.Z,{fullWidth:!0,label:"Permissions"}),renderValue:function(e){return e.map((function(e){var t,r;return null!==(t=null===(r=Z.find((function(t){return t.value==e})))||void 0===r?void 0:r.name)&&void 0!==t?t:e})).join(", ")},onChange:function(e){var t=Object();e.target.value.map((function(e){t[e]=!0})),H(t)}},Z.map((function(e){return n.createElement(p.Z,{key:e.value,value:e.value},n.createElement(f.Z,{checked:Object.keys(U).indexOf(e.value)>-1}),n.createElement(d.Z,{primary:e.name}))}))),n.createElement(m.Z,null,"Select Permissions"))))))}}}]);