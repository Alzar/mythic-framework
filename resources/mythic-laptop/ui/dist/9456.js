"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[9456,8894,1252,3477,1748],{99456:(e,t,r)=>{r.r(t),r.d(t,{default:()=>J});var n=r(89526),a=r(92070),o=r(65092),l=r(88590),c=r(14710),i=r(33933),u=r(16025),s=r(72215),d=r(91153),m=r(77548),p=r(23646),f=r(2029),b=r(71529),v=r(57170),E=r(42282),I=r(30909),y=(r(36105),r(21447)),k=r(87961),g=r(20785),h=r(83477);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t,r,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,a)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){w(o,n,a,l,c,"next",e)}function c(e){w(o,n,a,l,c,"throw",e)}l(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,c=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var N=(0,b.Z)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,overflow:"hidden"},header:{background:e.palette.primary.main,fontSize:20,padding:15,lineHeight:"45px",height:78},headerAction:{textAlign:"right","&:hover":{color:e.palette.text.main,transition:"color ease-in 0.15s"}},item:{borderBottom:"1px solid ".concat(e.palette.border.divider)},avatar:{backgroundColor:e.palette.primary.main},editorField:{marginBottom:15},owner:{fontSize:14,color:"gold",marginRight:5},emptyMsg:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"}}}));const J=function(e){var t,r,b=e.refreshRoster,Z=e.loading,D=e.jobData,w=e.playerJob,G=N(),J=((0,a.I0)(),(0,o.k6)()),A=(0,k.VY)(),L=(0,k.Gt)(),W=(0,a.v9)((function(e){return e.data.data.player}));null!=D&&D.Workplaces?t={SID:"",Job:{Id:D.Id,Workplace:null==D?void 0:D.Workplaces[0],Grade:null==D||null===(r=D.Workplaces[0])||void 0===r?void 0:r.Grades[0]}}:t={SID:"",Job:{Id:D.Id,Workplace:null,Grade:null==D?void 0:D.Grades[0]}};var P=W.SID==(null==D?void 0:D.Owner),j=L("JOB_MANAGEMENT",D.Id)||P,C=L("JOB_HIRE",D.Id)||P,F=L("JOB_FIRE",D.Id)||P,R=O((0,n.useState)(!1),2),T=R[0],B=R[1],M=O((0,n.useState)(!1),2),_=M[0],U=M[1],H=O((0,n.useState)(null),2),Y=H[0],z=H[1],Q=O((0,n.useState)(!1),2),V=Q[0],q=Q[1],$=function(){var e=x(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!Y.edit){e.next=17;break}return e.prev=2,e.next=5,y.Z.send("UpdateEmployee",Y);case 5:return e.next=7,e.sent.json();case 7:e.sent.success?b():A("Unable To Update Employee"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),A("Unable To Update Employee");case 15:e.next=48;break;case 17:if(e.prev=17,Y.SID==W.SID){e.next=41;break}return e.next=21,y.Z.send("HireEmployee",Y);case 21:return e.next=23,e.sent.json();case 23:if(!(r=e.sent).success){e.next=28;break}A("Employment Offer Sent"),e.next=39;break;case 28:e.t1=r.code,e.next="ERROR"===e.t1?31:"INVALID_PERMISSIONS"===e.t1?33:"INVALID_TARGET"===e.t1?35:"OUTSTANDING_OFFER"===e.t1?37:31;break;case 31:return A("Unable To Hire Employee"),e.abrupt("break",39);case 33:return A("Not Authorized"),e.abrupt("break",39);case 35:return A("Invalid or Offline State ID"),e.abrupt("break",39);case 37:return A("Person Has An Outstanding Employment Offer"),e.abrupt("break",39);case 39:e.next=42;break;case 41:A("You Cannot Hire Yourself, Dumbass");case 42:e.next=48;break;case 44:e.prev=44,e.t2=e.catch(17),console.log(e.t2),A("Unable To Hire Employee");case 48:z(null);case 49:case"end":return e.stop()}}),e,null,[[2,11],[17,44]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=x(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Z.send("FireEmployee",Y);case 3:return e.next=5,e.sent.json();case 5:if(!(t=e.sent).success){e.next=11;break}A("".concat(Y.First," ").concat(Y.Last," Has Been Fired")),b(),e.next=18;break;case 11:e.t0=t.code,e.next="INVALID_PERMISSIONS"===e.t0?14:(e.t0,16);break;case 14:return A("Not Authorized"),e.abrupt("break",18);case 16:return A("Unable To Fire ".concat(Y.First," ").concat(Y.Last)),e.abrupt("break",18);case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(0),console.log(e.t1),A("Unable To Fire ".concat(Y.First," ").concat(Y.Last));case 24:q(!1),z(null);case 26:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=x(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,y.Z.send("QuitJob",{JobId:D.Id});case 5:return e.next=7,e.sent.json();case 7:t=e.sent,A(t?"Congrats, You Quit":"Unable To Quit Job"),U(!1),B(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),A("Unable To Quit Job");case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return n.createElement("div",{className:G.wrapper},n.createElement(l.Z,{position:"static",className:G.header},n.createElement(c.ZP,{container:!0},n.createElement(c.ZP,{item:!0,xs:7},n.createElement(E.Z,{lines:1},D.Name)),n.createElement(c.ZP,{item:!0,xs:5,className:G.headerAction},n.createElement(i.Z,{title:"My Employment Details"},n.createElement(u.Z,{onClick:function(){return B(!0)}},n.createElement(v.G,{icon:["fas","user"]}))),C&&n.createElement(i.Z,{title:"Hire New Employee"},n.createElement(u.Z,{onClick:function(){return z(t)}},n.createElement(v.G,{icon:["fas","plus"]}))),n.createElement(i.Z,{title:"Force Refresh"},n.createElement(u.Z,{onClick:function(){return b()},disabled:Z},n.createElement(v.G,{className:"fa ".concat(Z?"fa-spin":""),icon:["fas","arrows-rotate"]}))),n.createElement(i.Z,{title:"Home"},n.createElement(u.Z,{onClick:function(){J.goBack()}},n.createElement(v.G,{icon:["fas","house"]}))))),n.createElement(g.u_,{open:T,title:"My Employment",onClose:function(){return B(null)},onDelete:P?null:function(){return U(!0)},deleteLang:"Quit"},n.createElement(s.Z,null,n.createElement(d.ZP,null,n.createElement(m.Z,{primary:"Job",secondary:w.Name})),P&&n.createElement(d.ZP,null,n.createElement(m.Z,{primary:"Owner",secondary:"You Are the Owner"})),w.Workplace&&n.createElement(d.ZP,null,n.createElement(m.Z,{primary:"Workplace",secondary:w.Workplace.Name})),n.createElement(d.ZP,null,n.createElement(m.Z,{primary:"Grade",secondary:w.Grade.Name})))),!P&&n.createElement(g.I4,{title:"Quit ".concat(D.Name,"?"),open:_,confirm:"Yes",decline:"No",onConfirm:X,onDecline:function(){return U(!1)}})),D.Workplaces?D.Workplaces.map((function(e){return n.createElement(h.default,{key:e.Id,workplace:e,jobData:D,playerJob:w,onEmployeeClick:function(e){return z(S(S({},e),{},{SID:e.SID,Job:e.JobData,edit:!0}))}})})):n.createElement(h.default,{workplace:!1,jobData:D,playerJob:w,onEmployeeClick:function(e){return z(S(S({},e),{},{SID:e.SID,Job:e.JobData,edit:!0}))}}),C&&Boolean(Y)&&n.createElement(g.u_,{form:!0,open:null!=Y,title:null!=Y&&Y.edit?"Update Employment":"Hire Employee",onClose:function(){return z(null)},onAccept:$,onDelete:null!=Y&&Y.edit&&(j||F)&&(null==Y?void 0:Y.SID)!=W.SID?function(){return q(!0)}:null,deleteLang:"Fire"},Boolean(Y)&&n.createElement(n.Fragment,null,n.createElement(I.Z,{fullWidth:!0,required:!0,label:"State ID",name:"sid",className:G.editorField,value:Y.SID,disabled:null==Y?void 0:Y.edit,onChange:function(e){return z(S(S({},Y),{},{SID:e.target.value}))},type:"tel",isNumericString:!0,customInput:p.Z}),D.Workplaces&&n.createElement(p.Z,{select:!0,fullWidth:!0,label:"Workplace",className:G.editorField,value:Y.Job.Workplace.Id,disabled:!j,onChange:function(e){return z(S(S({},Y),{},{Job:S(S({},Y.Job),{},{Workplace:D.Workplaces.filter((function(t){return t.Id==e.target.value}))[0],Grade:D.Workplaces.filter((function(t){return t.Id==e.target.value}))[0].Grades[0]})}))}},D.Workplaces.map((function(e,t){return n.createElement(f.Z,{key:e.Id,value:e.Id},e.Name)}))),D.Workplaces?n.createElement(p.Z,{select:!0,fullWidth:!0,label:"Grade",className:G.editorField,value:Y.Job.Grade.Id,onChange:function(e){return z(S(S({},Y),{},{Job:S(S({},Y.Job),{},{Grade:D.Workplaces.filter((function(e){return e.Id==Y.Job.Workplace.Id}))[0].Grades.filter((function(t){return t.Id==e.target.value}))[0]})}))}},D.Workplaces.filter((function(e){return e.Id==Y.Job.Workplace.Id}))[0].Grades.sort((function(e,t){return e.Level-t.Level})).map((function(e,t){return n.createElement(f.Z,{key:e.Id,value:e.Id,disabled:!P&&w.Grade.Level<=e.Level},e.Name)}))):n.createElement(p.Z,{select:!0,fullWidth:!0,label:"Grade",className:G.editorField,value:Y.Job.Grade.Id,onChange:function(e){return z(S(S({},Y),{},{Job:S(S({},Y.Job),{},{Grade:D.Grades.filter((function(t){return t.Id==e.target.value}))[0]})}))}},D.Grades.sort((function(e,t){return e.Level-t.Level})).map((function(e,t){return n.createElement(f.Z,{key:e.Id,value:e.Id,disabled:!P&&w.Grade.Level<=e.Level},e.Name)}))))),Boolean(Y)&&(null==Y?void 0:Y.edit)&&n.createElement(g.I4,{title:"Fire ".concat(Y.First," ").concat(Y.Last,"?"),open:V,confirm:"Yes",decline:"No",onConfirm:K,onDecline:function(){return q(!1)}}))}},71252:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(89526),a=r(92070),o=r(91153),l=r(78894),c=r(32165),i=r(77548),u=r(33933),s=r(81939),d=r(71529),m=r(57170),p=r(87961),f=(0,d.Z)((function(e){return{item:{borderBottom:"1px solid ".concat(e.palette.border.divider),"&:first-child":{borderTop:"1px solid ".concat(e.palette.border.divider)}},avatar:{backgroundColor:e.palette.primary.main},myself:{fontSize:14,color:e.palette.info.main,marginRight:5},owner:{fontSize:14,color:"gold",marginRight:5}}}));const b=function(e){var t=e.jobData,r=e.playerJob,d=e.employee,b=e.onClick,v=f(),E=(0,p.Gt)(),I=((0,p.vM)(),(0,a.v9)((function(e){return e.data.data.player}))),y=I.SID==(null==t?void 0:t.Owner),k=E("JOB_MANAGEMENT",t.Id)||y,g=E("JOB_MANAGE_EMPLOYEES",t.Id)||y,h=(E("JOB_HIRE",t.Id),E("JOB_FIRE",t.Id)||y);return n.createElement(o.ZP,{className:v.item,button:((null==t?void 0:t.Owner)!=d.SID||y)&&(r.Grade.Level>d.JobData.Grade.Level||y)&&(k||g||h),onClick:((null==t?void 0:t.Owner)!=d.SID||y)&&(r.Grade.Level>d.JobData.Grade.Level||y)&&(k||g||h)?function(){return b(d)}:null},n.createElement(l.Z,null,n.createElement(c.Z,{className:v.avatar},n.createElement(m.G,{icon:["fas","user"]}))),n.createElement(i.Z,{primary:n.createElement("span",null,I.SID==d.SID?n.createElement(u.Z,{title:"You"},n.createElement("span",null,n.createElement(m.G,{className:v.myself,icon:["fas","user"]}))):(null==t?void 0:t.Owner)==d.SID?n.createElement(u.Z,{title:"Business Owner"},n.createElement("span",null,n.createElement(m.G,{className:v.owner,icon:["fas","crown"]}))):null,"".concat(d.First," ").concat(d.Last)),secondary:"".concat(d.JobData.Grade.Name," - ").concat(d.Phone)}),t.Owner!=d._id&&(r.Grade.Level>d.JobData.Grade.Level||y)&&(k||g||h)&&n.createElement(s.Z,null,n.createElement(m.G,{icon:["fas","pen-to-square"]})))}},83477:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var n=r(89526),a=r(92070),o=r(72215),l=r(91153),c=r(77548),i=r(71529),u=r(71252),s=(0,i.Z)((function(e){return{wrapper:{background:e.palette.secondary.dark,width:"90%",margin:"auto"}}}));const d=function(e){var t=e.jobData,r=e.playerJob,i=e.workplace,d=e.onEmployeeClick,m=(s(),(0,a.v9)((function(e){return e.com.roster}))),p=Array();return Boolean(m)&&m[t.Id]&&(p=i?m[t.Id].filter((function(e){var t;return(null===(t=e.JobData.Workplace)||void 0===t?void 0:t.Id)==i.Id})):m[t.Id]),0==p.length?null:n.createElement(o.Z,null,i&&n.createElement(l.ZP,null,n.createElement(c.Z,{primary:i.Name})),n.createElement(l.ZP,null,n.createElement(o.Z,{style:{width:"100%"}},p.sort((function(e,t){return t.JobData.Grade.Level-e.JobData.Grade.Level})).map((function(e){return n.createElement(u.default,{key:e.SID,jobData:t,playerJob:r,employee:e,onClick:d})})))))}},78894:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(71972),a=r(17692),o=r(89526),l=r(23060),c=r(82082),i=r(31946),u=r(47671),s=r(26966),d=r(24989);function m(e){return(0,d.Z)("MuiListItemAvatar",e)}(0,r(36787).Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var p=r(67557);const f=["className"],b=(0,u.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})((({ownerState:e})=>(0,a.Z)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8}))),v=o.forwardRef((function(e,t){const r=(0,s.Z)({props:e,name:"MuiListItemAvatar"}),{className:u}=r,d=(0,n.Z)(r,f),v=o.useContext(i.Z),E=(0,a.Z)({},r,{alignItems:v.alignItems}),I=(e=>{const{alignItems:t,classes:r}=e,n={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,c.Z)(n,m,r)})(E);return(0,p.jsx)(b,(0,a.Z)({className:(0,l.Z)(I.root,u),ownerState:E,ref:t},d))}))}}]);