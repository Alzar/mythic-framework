"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[5800],{85800:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var r=n(89526),a=n(92070),c=n(65092),o=n(88590),l=n(14710),i=n(33933),s=n(16025),u=n(23646),m=n(71529),p=n(57170),d=n(55565),f=n(23192),h=n(59324),g=n.n(h),y=n(20785),v=n(96241),E=n.n(v),b=n(87961),x=n(21447);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Z(c,r,a,o,l,"next",e)}function l(e){Z(c,r,a,o,l,"throw",e)}o(void 0)}))}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=(0,m.Z)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,overflowY:"auto",overflowX:"hidden"},header:{background:"#696969",fontSize:20,padding:15,lineHeight:"50px",height:78},subHeader:{padding:"7px 15px",backgroundColor:"#414141"},subsubHeader:{padding:"7px 15px",backgroundColor:e.palette.secondary.light},container:{padding:"10px 20px",height:"70%",overflow:"hidden"},body:{padding:"10px 20px",height:"70%",overflowX:"hidden",overflowY:"auto"},input:{width:"100%",padding:"0 10px"},messageImg:{display:"block",maxWidth:200},copyableText:{color:e.palette.primary.main,textDecoration:"underline","&:hover":{transition:"color ease-in 0.15s",color:e.palette.text.main,cursor:"pointer"}}}}));const O=function(e){var t,n,m,h=N(),v=(0,a.I0)(),w=(0,c.k6)(),k=(0,b.VY)(),Z=e.match.params,C=Z.id,O=Z.mode,S=("edit"==O||"new"==O)&&O,P=(0,a.v9)((function(e){return e.data.data.myDocuments})).find((function(e){return e._id===C})),T=j((0,r.useState)(null),2),R=(T[0],T[1],j((0,r.useState)({title:null!==(t=null==P?void 0:P.title)&&void 0!==t?t:"",content:null!==(n=null==P?void 0:P.content)&&void 0!==n?n:"",time:1645026791}),2)),_=R[0],I=R[1];(0,r.useEffect)((function(){(!S||"edit"===S&&P)&&I(P)}),[C,O]);var H=function(){var e=A(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("edit"!==S){e.next=18;break}if(!(_.title.length>=2)){e.next=17;break}return e.prev=2,e.next=5,x.Z.send("EditDocument",{id:_._id,data:{title:_.title,content:_.content}});case 5:return e.next=7,e.sent.json();case 7:e.sent?(v({type:"UPDATE_DATA",payload:{type:"myDocuments",id:_._id,data:_}}),w.replace("/apps/documents/view/".concat(C,"/v")),k("Document Edited Successfully")):k("Error Editing Document"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),k("Error Editing Document");case 15:e.next=18;break;case 17:k("Must Include Title");case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=A(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.send("DeleteDocument",{id:_._id});case 3:return e.next=5,e.sent.json();case 5:e.sent?(v({type:"REMOVE_DATA",payload:{type:"myDocuments",id:_._id}}),w.replace("/apps/documents/"),k("Document Deleted Successfully")):k("Error Deleting Document"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),k("Error Deleting Document");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=A(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.send("CreateDocument",_);case 3:return e.next=5,e.sent.json();case 5:(t=e.sent)?(v({type:"ADD_DATA",payload:{type:"myDocuments",data:t}}),w.replace("/apps/documents/view/".concat(t._id,"/v")),k("Document Created Successfully")):k("Error Creating Document"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),k("Error Creating Document");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=A(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.send("ShareDocument",_);case 3:return e.next=5,e.sent.json();case 5:t=e.sent,k(t?"Document Shared to All Nearby":"Unable to Share Document"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),k("Unable to Share Document");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),L=null!==(m=null==_?void 0:_.content)&&void 0!==m?m:"";return[{regex:/((https?:\/\/(www\.)?(i\.)?imgur\.com\/[a-zA-Z\d]+)(\.png|\.jpg|\.jpeg|\.gif)?)/gim,replace:'<LightboxImage className={classes.messageImg} src={"$1"} />'},{regex:/(http|https):\/\/(\S+)\.([a-z]{2,}?)(.*?)( |\,|$|\.)(mp4)/gim,replace:'<div>\n    \t\t\t<ReactPlayer\n    \t\t\t\tkey={key}\n    \t\t\t\tvolume={0.25}\n    \t\t\t\twidth="100%"\n    \t\t\t\tcontrols={true}\n    \t\t\t\turl={"$1"}\n    \t\t\t/>\n    \t\t</div>'}].forEach((function(e){L=L.replace(e.regex,e.replace)})),r.createElement(r.Fragment,null,r.createElement("div",{className:h.wrapper},r.createElement(o.Z,{position:"static",className:h.header},r.createElement(l.ZP,{container:!0},r.createElement(l.ZP,{item:!0,xs:7,style:{lineHeight:"50px"}},"My Documents"),r.createElement(l.ZP,{item:!0,xs:5,style:{textAlign:"right"}},"new"==S&&r.createElement(i.Z,{title:"Create"},r.createElement("span",null,r.createElement(s.Z,{className:h.headerAction,onClick:G},r.createElement(p.G,{className:"fa",icon:["fas","floppy-disk"]})))),"edit"==S&&r.createElement(i.Z,{title:"Edit & Save"},r.createElement("span",null,r.createElement(s.Z,{className:h.headerAction,onClick:H},r.createElement(p.G,{className:"fa",icon:["fas","floppy-disk-pen"]})))),!S&&!_.shared&&r.createElement(r.Fragment,null,r.createElement(i.Z,{title:"Edit"},r.createElement("span",null,r.createElement(s.Z,{className:h.headerAction,onClick:function(){w.push("/apps/documents/view/".concat(C,"/edit"))}},r.createElement(p.G,{className:"fa",icon:["fas","pen-to-square"]}))))),(!S||"edit"==S)&&r.createElement(r.Fragment,null,r.createElement(i.Z,{title:"Delete"},r.createElement("span",null,r.createElement(s.Z,{className:h.headerAction,onClick:F},r.createElement(p.G,{className:"fa",icon:["fas","trash-can-xmark"]}))))),!S&&r.createElement(r.Fragment,null,r.createElement(i.Z,{title:"Nearby Share"},r.createElement("span",null,r.createElement(s.Z,{className:h.headerAction,onClick:M},r.createElement(p.G,{className:"fa",icon:["fas","share-all"]})))))))),r.createElement(o.Z,{position:"static",className:h.subHeader},r.createElement(l.ZP,{container:!0},r.createElement(l.ZP,{item:!0,xs:6,style:{maxWidth:"20ch",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},_.title),r.createElement(l.ZP,{item:!0,xs:6,style:{textAlign:"right"}},"new"!=S&&_.time&&r.createElement(r.Fragment,null,"Edited "," ",r.createElement(g(),{className:h.postedTime,interval:6e4,fromNow:!0,unix:!0},+_.time))))),S?r.createElement("div",{className:h.container},r.createElement(u.Z,{className:h.creatorInput,fullWidth:!0,label:"Title",variant:"outlined",onChange:function(e){I(D(D({},_),{},{title:e.target.value}))},value:_.title,inputProps:{maxLength:100}}),r.createElement(y.ML,{value:_.content,onChange:function(e){I(D(D({},_),{},{content:e}))},placeholder:"Write Stuff Here"})):r.createElement("div",{className:h.body},r.createElement(E(),{autoCloseVoidElements:!0,bindings:{classes:h},components:{LightboxImage:y.NX,ReactPlayer:f.Z,CopyToClipboard:d.CopyToClipboard},jsx:L,blacklistedTags:["iframe","script","link","applet","style"]}))))}}}]);