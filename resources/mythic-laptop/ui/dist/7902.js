"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[7902],{57902:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(89526),a=n(92070),o=n(65092),l=n(88590),c=n(14710),i=n(33933),u=n(16025),s=n(71529),m=n(57170),d=n(53059),f=n(42282),p=n(20785),h=n(36105),v=n.n(h),y=n(21447),E=n(87961),b=n(7687);function k(e,t,n,r,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){k(o,r,a,l,c,"next",e)}function c(e){k(o,r,a,l,c,"throw",e)}l(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=(0,s.Z)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,overflow:"hidden"},header:{background:e.palette.primary.main,fontSize:20,padding:15,lineHeight:"45px",height:78},headerAction:{textAlign:"right","&:hover":{color:e.palette.text.main,transition:"color ease-in 0.15s"}},item:{borderBottom:"1px solid ".concat(e.palette.border.divider)}}}));const S=function(e){var t=e.jobData,n=(e.playerJob,I()),s=(0,o.k6)(),h=(0,a.I0)(),k=(0,E.VY)(),x=(0,a.v9)((function(e){return e.com.timeWorked})),S=(0,a.v9)((function(e){return e.com.timeWorkedUpdated})),Z=(0,a.v9)((function(e){return e.com.timeWorkedJob})),D=w((0,r.useState)(!1),2),A=(D[0],D[1]),C=(0,r.useMemo)((function(){return(0,d.throttle)(g(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.prev=1,e.next=4,y.Z.send("FetchTimeWorked",t.Id);case 4:return e.next=6,e.sent.json();case 6:if(!(n=e.sent)){e.next=11;break}h({type:"UPDATE_TIMEWORKED",payload:{timeWorked:n,timeWorkedJob:t.Id}}),e.next=12;break;case 11:throw n;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),k("Unable to Load Time Worked");case 18:A(!1);case 19:case"end":return e.stop()}}),e,null,[[1,14]])}))),5e3)}),[]);(0,r.useEffect)((function(){(!x||Date.now()-S>=12e4||Z!=t.Id)&&C()}),[]);var N,W,L=w((0,r.useState)(null),2),T=L[0],j=L[1];return r.createElement("div",{className:n.wrapper},r.createElement(l.Z,{position:"static",className:n.header},r.createElement(c.ZP,{container:!0},r.createElement(c.ZP,{item:!0,xs:11},r.createElement(f.Z,{lines:1},t.Name)),r.createElement(c.ZP,{item:!0,xs:1,className:n.headerAction},r.createElement(i.Z,{title:"Home"},r.createElement(u.Z,{onClick:function(){s.goBack()}},r.createElement(m.G,{icon:["fas","house"]})))))),x&&x.length>0?x.map((function(e){return r.createElement(b.default,{key:e.SID,employee:e,jobData:t,onClick:function(t){return j(e)}})})):r.createElement(p.aN,{static:!0,text:"Loading"}),r.createElement(p.u_,{open:null!=T,title:"View Time Worked",onClose:function(){return j(null)},onAccept:null,onDelete:null},null!=T&&r.createElement(r.Fragment,null,r.createElement("p",null,T.First," ",T.Last," (",T.SID,")"),r.createElement("p",null,"Last Went on Duty: ",(N=T.LastClockOn,W=t.Id,N&&N[W]?"".concat(v()(1e3*N[W]).format("LLL")," (").concat(v()(1e3*N[W]).fromNow(),")"):"Never")),r.createElement("p",null,"Has worked ",function(e,t){if(e&&e[t]){var n=v()().subtract(7,"days").unix(),r=0;return e[t].forEach((function(e){e.time>=n&&(r+=e.minutes)})),r>0?v().duration(r,"minutes").humanize():"0 minutes"}return"0 minutes"}(T.TimeClockedOn,t.Id)," in the last week."))))}},7687:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(89526),a=n(92070),o=n(91153),l=n(78894),c=n(32165),i=n(77548),u=n(33933),s=n(71529),m=n(57170),d=(n(87961),(0,s.Z)((function(e){return{item:{borderBottom:"1px solid ".concat(e.palette.border.divider),"&:first-child":{borderTop:"1px solid ".concat(e.palette.border.divider)}},avatar:{backgroundColor:e.palette.primary.main},myself:{fontSize:14,color:e.palette.info.main,marginRight:5},owner:{fontSize:14,color:"gold",marginRight:5}}})));const f=function(e){var t=e.jobData,n=(e.playerJob,e.employee),s=e.onClick,f=d(),p=(0,a.v9)((function(e){return e.data.data.player}));return r.createElement(o.ZP,{className:f.item,button:!0,onClick:function(){return s(n)}},r.createElement(l.Z,null,r.createElement(c.Z,{className:f.avatar},r.createElement(m.G,{icon:["fas","user"]}))),r.createElement(i.Z,{primary:r.createElement("span",null,p.SID==n.SID?r.createElement(u.Z,{title:"You"},r.createElement("span",null,r.createElement(m.G,{className:f.myself,icon:["fas","user"]}))):(null==t?void 0:t.Owner)==n.SID?r.createElement(u.Z,{title:"Business Owner"},r.createElement("span",null,r.createElement(m.G,{className:f.owner,icon:["fas","crown"]}))):null,"".concat(n.First," ").concat(n.Last)),secondary:"State ID: ".concat(n.SID)}))}}}]);