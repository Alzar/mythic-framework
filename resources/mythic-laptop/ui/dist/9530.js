"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[9530],{79530:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r=n(89526),a=n(92070),o=n(65092),l=n(47671),c=n(16743),i=n(25385),s=n(50563),u=n(88590),m=n(14710),d=n(33933),p=n(16025),f=n(72016),b=n(72215),v=n(91153),h=n(77548),E=n(23646),g=n(99494),y=n(40438),k=n(94882),N=n(14795),w=n(2029),x=n(13552),I=n(21722),Z=n(71529),S=n(57170),C=n(42282),O=n(30909),P=n(21447),G=n(87961),D=n(20785);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t,n,r,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){L(o,r,a,l,c,"next",e)}function c(e){L(o,r,a,l,c,"throw",e)}l(void 0)}))}}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}var _=(0,Z.Z)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main},header:{background:e.palette.primary.main,fontSize:20,padding:15,lineHeight:"45px",height:78},content:{height:"83.6%",overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.primary.main},"&::-webkit-scrollbar-track":{background:"transparent"}},headerAction:{textAlign:"right","&:hover":{color:e.palette.text.main,transition:"color ease-in 0.15s"}},workplaceAction:{fontSize:14},management:{fontSize:14,color:"gold",marginRight:5},item:{borderBottom:"1px solid ".concat(e.palette.border.divider),"&:first-of-type":{borderTop:"1px solid ".concat(e.palette.border.divider)}},editorField:{marginBottom:15},emptyMsg:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"},ownerBtn:{display:"block","&:not(:last-of-type)":{marginBottom:15}}}})),B=(0,l.ZP)((function(e){return r.createElement(c.Z,M({TransitionProps:{unmountOnExit:!0},disableGutters:!0,elevation:0,square:!0},e))}))((function(e){var t=e.theme;return{background:"transparent",borderBottom:"1px solid ".concat(t.palette.border.divider),"&:before":{display:"none"}}})),F=(0,l.ZP)((function(e){return r.createElement(i.Z,M({expandIcon:r.createElement(S.G,{icon:["fas","caret-down"]})},e))}))((function(e){var t=e.theme;return{width:"100%",background:"transparent",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper":{fontSize:20,color:t.palette.primary.main,transform:"rotate(-90deg)",transition:"0.25s","&.Mui-expanded":{transform:"rotate(0deg)"}},"& .MuiAccordionSummary-content":{margin:0,marginLeft:t.spacing(1)}}})),J=(0,l.ZP)(s.Z)((function(e){return{padding:e.theme.spacing(0),borderTop:"1px solid rgba(0, 0, 0, .125)"}}));const z=function(e){var t=e.refreshRoster,n=e.jobData,l=e.playerJob,c=_(),i=(0,G.VY)(),s=(0,o.k6)(),Z=((0,G.AA)(),(0,a.v9)((function(e){return e.data.data.player}))),A=(0,a.v9)((function(e){return e.data.data.NamedJobPermissions})),W=Z.SID==(null==n?void 0:n.Owner),L={Id:"",Name:"",Level:1,Permissions:Object()},U=T((0,r.useState)(!1),2),M=U[0],z=U[1],V=T((0,r.useState)(!1),2),q=V[0],Y=V[1],H=T((0,r.useState)(!1),2),X=H[0],$=H[1],K=T((0,r.useState)(null),2),Q=K[0],ee=K[1],te=T((0,r.useState)(!1),2),ne=te[0],re=te[1],ae=T((0,r.useState)(!1),2),oe=ae[0],le=ae[1],ce=T((0,r.useState)(null),2),ie=ce[0],se=ce[1],ue=T((0,r.useState)(null),2),me=ue[0],de=ue[1],pe=T((0,r.useState)(!1),2),fe=(pe[0],pe[1],T((0,r.useState)(!1),2)),be=fe[0],ve=fe[1],he=T((0,r.useState)(!1),2),Ee=he[0],ge=he[1],ye=function(){s.goBack()},ke=function(){var e=R(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),le(!0),e.prev=2,e.next=5,P.Z.send("EditWorkplace",{JobId:ie.JobId,WorkplaceId:ie.Id,NewName:ie.Name});case 5:return e.next=7,e.sent.json();case 7:if(!(r=e.sent).success){e.next=13;break}i("Workplace Updated"),t(),e.next=22;break;case 13:e.t0=r.code,e.next="INVALID_PERMISSIONS"===e.t0?16:"MISSING_JOB"===e.t0?18:(e.t0,20);break;case 16:return i("Not Authorized"),e.abrupt("break",22);case 18:return i("Workplace Doesn't Exist"),e.abrupt("break",22);case 20:return i("Unable to Update Workplace"),e.abrupt("break",22);case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(2),console.log(e.t1),i("Unable to Update Workplace");case 28:le(!1);case 29:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=R(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),le(!0),e.prev=2,e.next=5,P.Z.send(me.edit?"EditGrade":"CreateGrade",me);case 5:return e.next=7,e.sent.json();case 7:if(!(r=e.sent).success){e.next=13;break}i("Grade ".concat(me.edit?"Updated":"Created")),t(),e.next=20;break;case 13:e.t0=r.code,e.next="ERROR"===e.t0?16:"INVALID_PERMISSIONS"===e.t0?18:16;break;case 16:return i("Unable To ".concat(me.edit?"Update":"Create"," Grade")),e.abrupt("break",20);case 18:return i("Not Authorized"),e.abrupt("break",20);case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(2),console.log(e.t1),i("Unable to ".concat(me.edit?"Update":"Create"," Grade"));case 26:le(!1);case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=R(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(!1),le(!0),e.prev=2,e.next=5,P.Z.send("DeleteGrade",me);case 5:return e.next=7,e.sent.json();case 7:if(!(n=e.sent).success){e.next=13;break}i("Grade Deleted"),t(),e.next=24;break;case 13:e.t0=n.code,e.next="INVALID_PERMISSIONS"===e.t0?16:"JOB_OCCUPIED"===e.t0?18:"MISSING_JOB"===e.t0?20:(e.t0,22);break;case 16:return i("Not Authorized"),e.abrupt("break",24);case 18:return i("Cannot Delete a Grade With Employees In"),e.abrupt("break",24);case 20:return i("Grade Doesn't Exist"),e.abrupt("break",24);case 22:return i("Unable to Delete Grade"),e.abrupt("break",24);case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(2),console.log(e.t1),i("Unable to Delete Grade");case 30:le(!1);case 31:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=R(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),W){e.next=3;break}return e.abrupt("return");case 3:return le(!0),e.prev=4,e.next=7,P.Z.send("RenameCompany",n.target.name.value);case 7:return e.next=9,e.sent.json();case 9:if(!(r=e.sent).success){e.next=15;break}i("Company Name Updated"),t(),e.next=22;break;case 15:e.t0=r.code,e.next="INVALID_PERMISSIONS"===e.t0?18:(e.t0,20);break;case 18:return i("Not Authorized"),e.abrupt("break",22);case 20:return i("Unable To Edit Company"),e.abrupt("break",22);case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(4),console.log(e.t1),i("Unable to Edit Company");case 28:le(!1);case 29:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=R(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),W){e.next=3;break}return e.abrupt("return");case 3:return le(!0),e.prev=4,e.next=7,P.Z.send("DisbandCompany");case 7:return e.next=9,e.sent.json();case 9:if(!(n=e.sent).success){e.next=15;break}i("Company Has Been Deleted"),ye(),e.next=22;break;case 15:e.t0=n.code,e.next="INVALID_PERMISSIONS"===e.t0?18:(e.t0,20);break;case 18:return i("Not Authorized"),e.abrupt("break",22);case 20:return i("Unable to Disband Company"),e.abrupt("break",22);case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(4),console.log(e.t1),i("Unable to Disband Company");case 28:$(!1),le(!1);case 30:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=R(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),W){e.next=3;break}return e.abrupt("return");case 3:return le(!0),e.prev=4,e.next=7,P.Z.send("TransferCompany",{target:Q.target});case 7:return e.next=9,e.sent.json();case 9:if(!(r=e.sent).success){e.next=15;break}i("Company Ownership Has Been Transfered"),t(),e.next=22;break;case 15:e.t0=r.code,e.next="INVALID_PERMISSIONS"===e.t0?18:(e.t0,20);break;case 18:return i("Not Authorized"),e.abrupt("break",22);case 20:return i("Unable to Disband Company"),e.abrupt("break",22);case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(4),console.log(e.t1),i("Unable To Transfer Company Ownership");case 28:re(!1),ee(null),le(!1);case 31:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}();return r.createElement("div",{className:c.wrapper},r.createElement(u.Z,{position:"static",className:c.header},r.createElement(m.ZP,{container:!0},r.createElement(m.ZP,{item:!0,xs:7},r.createElement(C.Z,{lines:1},n.Name)),r.createElement(m.ZP,{item:!0,xs:5,className:c.headerAction},W&&r.createElement(d.Z,{title:"Company Owner Menu"},r.createElement(p.Z,{onClick:function(){return z(!0)}},r.createElement(S.G,{icon:["fas","gear"]}))),!n.Workplaces&&r.createElement(d.Z,{title:"Create New Grade"},r.createElement(p.Z,{onClick:function(){return de(j({JobId:n.Id,WorkplaceId:null},L))}},r.createElement(S.G,{icon:["fas","plus"]}))),r.createElement(d.Z,{title:"Force Refresh"},r.createElement(p.Z,{onClick:function(){return t()},disabled:oe},r.createElement(S.G,{className:"fa ".concat(oe?"fa-spin":""),icon:["fas","arrows-rotate"]}))),r.createElement(d.Z,{title:"Home"},r.createElement(p.Z,{onClick:ye},r.createElement(S.G,{icon:["fas","house"]})))))),r.createElement("div",{className:c.content},n.Workplaces&&n.Workplaces.length>0?n.Workplaces.map((function(e){return r.createElement(B,{key:"wp-".concat(e.Id),expanded:Ee==e.Id,onChange:(t=e.Id,function(e,n){ge(!!n&&t)})},r.createElement(f.Z,{style:{width:"100%"}},r.createElement(F,{expandIcon:r.createElement(S.G,{icon:["fas","caret-down"]})},r.createElement(b.Z,{dense:!0},r.createElement(v.ZP,null,r.createElement(h.Z,{primary:e.Name,secondary:"".concat(e.Grades.length," Grades")}))))),r.createElement(J,null,r.createElement(b.Z,null,r.createElement(v.ZP,null,r.createElement(m.ZP,{container:!0,style:{textAlign:"center"}},r.createElement(m.ZP,{item:!0,xs:6},r.createElement(d.Z,{title:"Create New Grade"},r.createElement(p.Z,{onClick:function(){return de(j(j({},L),{},{JobId:n.Id,WorkplaceId:e.Id}))},className:c.workplaceAction},r.createElement(S.G,{icon:["fas","plus"]})))),r.createElement(m.ZP,{item:!0,xs:6},r.createElement(d.Z,{title:"Edit Workplace"},r.createElement(p.Z,{onClick:function(){return se(j(j({JobId:n.Id},e),{},{edit:!0}))},className:c.workplaceAction},r.createElement(S.G,{icon:["fas","pen-to-square"]})))))),r.createElement(v.ZP,null,r.createElement(h.Z,{primary:"Grades"})),r.createElement(v.ZP,null,r.createElement(b.Z,{style:{width:"100%"}},e.Grades.sort((function(e,t){return e.Level-t.Level})).map((function(t){var a;return r.createElement(v.ZP,{button:t.Level<l.Grade.Level||W,key:"grade-".concat(t.Id),onClick:t.Level<l.Grade.Level||W?function(){return de(j(j({},t),{},{JobId:n.Id,WorkplaceId:e.Id,edit:!0}))}:null,className:c.item},r.createElement(h.Z,{primary:r.createElement("span",null,(null==t||null===(a=t.Permissions)||void 0===a?void 0:a.JOB_MANAGEMENT)&&r.createElement(S.G,{className:c.management,icon:["fas","user-shield"]}),t.Name),secondary:"".concat(Object.keys(t.Permissions).filter((function(e){return t.Permissions[e]})).length," Permissions")}))})))))));var t})):r.createElement(b.Z,null,r.createElement(v.ZP,null,r.createElement(h.Z,{primary:"Grades"})),r.createElement(v.ZP,null,r.createElement(b.Z,{style:{width:"100%"}},n.Grades.map((function(e){var t;return r.createElement(v.ZP,{button:e.Level<l.Grade.Level||W,key:"grade-".concat(e.Id),onClick:e.Level<l.Grade.Level||W?function(){return de(j(j({},e),{},{JobId:n.Id,WorkplaceId:null,edit:!0}))}:null,className:c.item},r.createElement(h.Z,{primary:r.createElement("span",null,(null==e||null===(t=e.Permissions)||void 0===t?void 0:t.JOB_MANAGEMENT)&&r.createElement(S.G,{className:c.management,icon:["fas","user-shield"]}),e.Name),secondary:"".concat(Object.keys(e.Permissions).filter((function(t){return e.Permissions[t]})).length," Permissions")}))}))))),r.createElement(D.I4,{title:"Delete Grade?",open:be,confirm:"Yes",decline:"No",onConfirm:we,onDecline:function(){return ve(!1)}},r.createElement("p",null,"Deleting this grade will remove all permissions related to it and cannot be undone, are you sure?")),r.createElement(D.u_,{form:!0,formStyle:{position:"relative"},disabled:oe,open:null!=ie,title:"Edit Workplace",onAccept:ke,onClose:function(){return se(null)},submitLang:"Edit"},null!=ie&&r.createElement(r.Fragment,null,oe&&r.createElement(D.aN,{static:!0,text:"Submitting"}),r.createElement(E.Z,{fullWidth:!0,required:!0,label:"Workplace Name",name:"Name",disabled:oe,className:c.editorField,value:ie.Name,onChange:function(e){return se(j(j({},ie),{},{Name:e.target.value}))}}))),r.createElement(D.u_,{disabled:oe,form:!0,formStyle:{position:"relative"},open:null!=me,title:"".concat(null!=me&&me.edit?"Edit":"Create"," Grade"),onAccept:Ne,onClose:function(){return de(null)},onDelete:null==me||!me.edit||null!=me&&me.Owner?null:function(){return ve(!0)},submitLang:null!=me&&me.edit?"Edit":"Create"},null!=me&&r.createElement(r.Fragment,null,oe&&r.createElement(D.aN,{static:!0,text:"Submitting"}),r.createElement(E.Z,{fullWidth:!0,required:!0,label:"Grade Name",name:"Name",disabled:oe,className:c.editorField,value:me.Name,onChange:function(e){return de(j(j({},me),{},{Name:e.target.value}))}}),r.createElement(O.Z,{fullWidth:!0,required:!0,label:"Grade Level",helperText:"This determines where in the rank heirarchy this grade falls",name:"Level",disabled:me.Owner||oe,className:c.editorField,value:me.Level,onChange:function(e){return de(j(j({},me),{},{Level:e.target.value}))},type:"tel",isNumericString:!0,customInput:E.Z}),r.createElement(g.Z,{fullWidth:!0,className:c.editorField},r.createElement(y.Z,{id:"grade-perms"},"Permissions"),r.createElement(k.Z,{labelId:"grade-perms",multiple:!0,fullWidth:!0,disabled:me.Owner||oe,value:Object.keys(me.Permissions),onChange:function(e){var t=Object();e.target.value.map((function(e){t[e]=!0})),de(j(j({},me),{},{Permissions:t}))},input:r.createElement(N.Z,{fullWidth:!0,label:"Permissions"}),renderValue:function(e){return e.map((function(e){var t,n;return null!==(t=null===(n=A[e])||void 0===n?void 0:n.name)&&void 0!==t?t:e})).join(", ")}},Object.keys(A).filter((function(e){var t,r=A[e];return!r.restricted||(null===(t=r.restricted)||void 0===t?void 0:t.includes(null==n?void 0:n.Id))})).sort().map((function(e){var t,n=A[e];return r.createElement(w.Z,{key:"perm-".concat(e),value:e},r.createElement(x.Z,{checked:Object.keys(me.Permissions).indexOf(e)>-1}),r.createElement(h.Z,{primary:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:e}))})))))),W&&r.createElement(r.Fragment,null,r.createElement(D.u_,{open:M,title:"Owner Actions",onClose:function(){return z(!1)},hideClose:!0},r.createElement(r.Fragment,null,r.createElement(I.Z,{fullWidth:!0,variant:"contained",className:c.ownerBtn,onClick:function(){return Y(!0)}},"Rename Company"),r.createElement(I.Z,{fullWidth:!0,variant:"contained",className:c.ownerBtn,disabled:!0,onClick:function(){return $(!0)}},"Disband Company"),r.createElement(I.Z,{fullWidth:!0,variant:"contained",className:c.ownerBtn,disabled:!0,onClick:function(){return ee({target:""})}},"Transfer Company Ownership"))),r.createElement(D.u_,{form:!0,formStyle:{position:"relative"},disabled:oe,open:q,title:"Rename ".concat(n.Name),onAccept:xe,onClose:function(){return Y(!1)},submitLang:"Submit"},r.createElement(r.Fragment,null,oe&&r.createElement(D.aN,{static:!0,text:"Submitting"}),r.createElement(E.Z,{fullWidth:!0,required:!0,label:"Company Name",name:"name",disabled:oe,className:c.editorField,defaultValue:n.Name}))),Boolean(Q)&&r.createElement(r.Fragment,null,r.createElement(D.u_,{form:!0,formStyle:{position:"relative"},disabled:oe,open:!0,title:"Transfer ".concat(n.Name," Ownership"),onAccept:function(){return re(!0)},onClose:function(){return ee(null)},submitLang:"Transfer Ownership"},r.createElement(r.Fragment,null,oe&&r.createElement(D.aN,{static:!0,text:"Submitting"}),r.createElement(O.Z,{fullWidth:!0,required:!0,label:"Target State ID",name:"target",className:c.editorField,value:Q.target,disabled:oe,onChange:function(e){return ee(j(j({},Q),{},{target:e.target.value}))},type:"tel",isNumericString:!0,customInput:E.Z}))),r.createElement(D.I4,{title:"Transfer Company?",open:ne,confirm:"Yes",decline:"No",onConfirm:Ze,onDecline:function(){return re(!1)}},r.createElement("p",null,"Transfering company will transfer full ownership of company & associated assets."),r.createElement("p",null,"This is not reversable, if you proceed you will lose all control over the company."))),r.createElement(D.I4,{title:"Disband Company?",open:X,confirm:"Yes",decline:"No",onConfirm:Ie,onDecline:function(){return $(!1)}},r.createElement("p",null,"Disbanding the company will remove everyone employed, grades, upgrades, or any data or assets associated with your company."),r.createElement("p",null,"This is not reversable, if you proceed this company will be lost forever and you"," ",r.createElement("b",null,r.createElement("i",null,"WILL NOT"))," ","get any sort of refund for anything purchased for your company.")))))}}}]);