"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[842],{40842:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var n=r(89526),a=r(92070),o=r(88590),i=r(14710),c=r(72215),l=r(91153),u=r(77548),s=r(71529),d=r(65092),m=r(53059),p=(r(57170),r(20785)),f=r(21447),h=r(42282),b=r(87961);function y(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){y(o,n,a,i,c,"next",e)}function c(e){y(o,n,a,i,c,"throw",e)}i(void 0)}))}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=(0,s.Z)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main},header:{background:e.palette.primary.main,fontSize:20,padding:15,lineHeight:"45px",height:78},content:{height:"93.75%",overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.primary.main},"&::-webkit-scrollbar-track":{background:"transparent"}},tabPanel:{},phoneTab:{minWidth:"33.333%"},alert:{width:"fit-content",margin:"auto"},emptyMsg:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"},item:{borderBottom:"1px solid ".concat(e.palette.border.divider),"&:first-of-type":{borderTop:"1px solid ".concat(e.palette.border.divider)}},list:{height:"100%",width:"100%",overflow:"auto"}}}));const E=function(e){var t=k(),r=(0,a.I0)(),s=(0,b.VY)(),y=(0,d.k6)(),w=((0,b.Gt)(),(0,a.v9)((function(e){return e.com.roster}))),E=(0,a.v9)((function(e){return e.com.rosterUpdated})),x=(0,a.v9)((function(e){return e.data.data.externalJobs})),S=(0,a.v9)((function(e){return e.data.data.player})),A=g((0,n.useState)(!1),2),N=A[0],T=A[1],Z=(0,n.useMemo)((function(){return(0,m.throttle)(v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,e.next=4,f.Z.send("FetchRoster",{});case 4:return e.next=6,e.sent.json();case 6:if(!(t=e.sent)||!t.rosterData){e.next=11;break}r({type:"UPDATE_ROSTERS",payload:{roster:t.rosterData}}),e.next=12;break;case 11:throw t;case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),s("Unable to Load Roster's"),r({type:"UPDATE_ROSTERS",payload:{roster:!1}});case 19:T(!1);case 20:case"end":return e.stop()}}),e,null,[[1,14]])}))),5e3)}),[]);return(0,n.useEffect)((function(){(S.Jobs&&S.Jobs.length)>0&&(!w||Date.now()-E>=18e4)&&Z()}),[]),n.createElement("div",{className:t.wrapper},n.createElement(o.Z,{position:"static",className:t.header},n.createElement(i.ZP,{container:!0},n.createElement(i.ZP,{item:!0,xs:7},n.createElement(h.Z,{lines:1},"Company Manager")))),N?n.createElement(p.aN,{static:!0,text:"Loading"}):n.createElement(n.Fragment,null,(S.Jobs&&S.Jobs.length)>0?n.createElement(c.Z,{className:t.list},S.Jobs.map((function(e){var a;if(!x.includes(e.Id))return n.createElement(l.ZP,{button:!0,key:"job-".concat(e.Id),onClick:function(){return t=e.Id,y.push("/apps/comanager/view/".concat(t)),void r({type:"SET_COM_TAB",payload:{tab:0}});var t},className:t.item},n.createElement(u.Z,{primary:n.createElement("span",null,e.Workplace?null===(a=e.Workplace)||void 0===a?void 0:a.Name:e.Name),secondary:"Employed as ".concat(e.Grade.Name)}))}))):n.createElement("div",{className:t.emptyMsg},"You're Not Employed at a Company")))}}}]);